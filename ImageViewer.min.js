/* 2.23.14 */
(("undefined"!=typeof self?self:this).wpJsonpFlightsWidget_bizShared=("undefined"!=typeof self?self:this).wpJsonpFlightsWidget_bizShared||[]).push([[1],{39:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e._self._c;return t("transition",{attrs:{name:"viewer-fade"}},[t("div",{ref:"jz-image-viewer__wrapper",staticClass:"jz-image-viewer__wrapper pn-fixed tp-0_px lt-0_px rt-0_px bm-0_px wtowsg-touch owy-hidden owx-hidden",style:{"z-index":e.zIndex},attrs:{tabindex:"-1"},on:{contextmenu:e.handleContextMenu}},[t("div",{staticClass:"jz-image-viewer__mask wlce-opacity tp-0_px lt-0_px rt-0_px bm-0_px wh-100_pct ht-100_pct bdcr-000 pn-absolute","class":e.maskClass,style:e.maskStyle,on:{click:function(t){return t.target!==t.currentTarget?null:e.handleMaskClick.apply(null,arguments)}}}),e._v(" "),t("div",{staticClass:"jz-image-viewer__top wh-100_pct pn-absolute zix-99999 dy-flex anis-center","class":e.viewerTopClass},[e.isMobile?e.isMobile&&e.hideDetailContent?[t("i",{staticClass:"ftse-0_px cr-white cr-pointer mnlt-15_px pgtp-15_px pgbm-15_px",on:{click:e.hide}},[t("svg",{staticClass:"jz-icon-arrow-back wh-20_px ht-20_px",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30"}},[t("path",{attrs:{d:"M22,3,10,15,22,27",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}})])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.imgDataList.length>1,expression:"imgDataList.length > 1"}],staticClass:"jz-image-viewer__count brrs-15_px bxsg-border pgtp-15_px pgbm-15_px ftse-0P875_rem pgrt-10_px pglt-10_px cr-white"},[e._v("\n                    "+e._s(e.index+1)+"/"+e._s(e.imgDataList.length)+"\n                ")])]:e._e():[t("div",{staticClass:"jz-image-viewer__des wh-100_pct mxwh-97_pct mnht-60_px dy-flex anis-center fxdn-column jyct-center"},[t("p",{directives:[{name:"show",rawName:"v-show",value:e.currentImgViewer.title,expression:"currentImgViewer.title"}],staticClass:"cr-white ftse-15_px ttan-center owx-hidden owy-hidden mxwh-95_pct ttow-ellipse wese-nowrap","class":e.titleClass,attrs:{title:e.currentImgViewer.title}},[e._v("\n                        "+e._s(e.currentImgViewer.title)+"\n                    ")]),e._v(" "),t("p",{directives:[{name:"show",rawName:"v-show",value:e.currentImgViewer.description,expression:"currentImgViewer.description"}],staticClass:"cr-ccc ftse-12_px ttan-center owx-hidden owy-hidden mxwh-95_pct ttow-ellipse wese-nowrap","class":e.disabledLongPressClass,attrs:{title:e.currentImgViewer.description}},[e._v("\n                        "+e._s(e.currentImgViewer.description)+"\n                    ")])]),e._v(" "),t("span",{staticClass:"dy-flex jyct-center anis-center brrs-50_pct bxsg-border cr-pointer urst-none wh-32_px ht-32_px mnrt-22_px ftse-40_px jz-image-viewer__close","class":e.closeClass},[t("svg",{staticClass:"jz-icon-close wh-20_px ht-20_px cr-white oy-1--hover oy-0P8",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30"},on:{click:e.hide}},[t("line",{attrs:{x1:"7",y1:"7",x2:"23",y2:"23",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}}),e._v(" "),t("line",{attrs:{x1:"23",y1:"7",x2:"7",y2:"23",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}})])])]],2),e._v(" "),e.isSingle||e.isMobile?e._e():[t("span",{staticClass:"pn-absolute zix-1 dy-flex jyct-center anis-center brrs-50_pct bxsg-border urst-none tp-50_pct tm-translateYNE50_pct wh-70_px ht-70_px ftse-24_px cr-white bdcr-000CP3 brcr-white lt-40_px jz-image-viewer__prev","class":{"bdcr-000CP5--hover":e.disableFirstARROW,"cr-pointer":e.disableFirstARROW},on:{click:e.prev}},[t("svg",{staticClass:"jz-icon-arrow-left wh-30_px ht-30_px oy-0P8","class":{"oy-1--hover":e.disableFirstARROW},attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30"}},[t("path",{attrs:{d:"M20,3L8,15l12,12",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}})])]),e._v(" "),t("span",{staticClass:"pn-absolute zix-1 dy-flex jyct-center anis-center brrs-50_pct bxsg-border urst-none tp-50_pct tm-translateYNE50_pct wh-70_px ht-70_px ftse-24_px cr-white bdcr-000CP3 brcr-white rt-40_px ttit-2_px jz-image-viewer__next","class":{"bdcr-000CP5--hover":e.disableLastARROW,"cr-pointer":e.disableLastARROW},on:{click:e.next}},[t("svg",{staticClass:"jz-icon-arrow-right wh-30_px ht-30_px oy-0P8","class":{"oy-1--hover":e.disableLastARROW},attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30"}},[t("path",{attrs:{d:"M10,27,22,15,10,3",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}})])])],e._v(" "),!e.isMobile&&e.isShowActions?t("div",{staticClass:"pn-absolute zix-1 dy-flex jyct-center anis-center brrs-25_px bxsg-border urst-none lt-50_pct bm-20_px tm-translateXNE50_pct ht-50_px pglt-23_px pgrt-23_px bdcr-000CP5 brcr-white brrs-22_px jz-image-viewer__actions"},[t("div",{staticClass:"jz-image-viewer__actions__inner ftse-23_px cr-white dy-flex anis-center jyct-spaceAround ttan-justify wh-100_pct ht-100_pct"},[t("i",{staticClass:"ftse-0_px",attrs:{title:"缩小"}},[t("svg",{staticClass:"jz-icon-zoom-out wh-50_px ht-50_px cr-white--hover bdcr-000CP5--hover oy-1--hover oy-0P8","class":e.actionsSvgOutClass,attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50"},on:{click:function(t){return e.handleActions("zoomOut")}}},[t("path",{attrs:{d:"M24,33h0a9,9,0,0,1-9-9h0a9,9,0,0,1,9-9h0a9,9,0,0,1,9,9h0A9,9,0,0,1,24,33Zm-3-9h6m7,11-4.08-4.08",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}})])]),e._v(" "),t("i",{staticClass:"ftse-0_px",attrs:{title:"放大"}},[t("svg",{staticClass:"jz-icon-zoom-in wh-50_px ht-50_px cr-white--hover bdcr-000CP5--hover oy-1--hover oy-0P8","class":e.actionsSvgInClass,attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50"},on:{click:function(t){return e.handleActions("zoomIn")}}},[t("path",{attrs:{d:"M24,33h0a9,9,0,0,1-9-9h0a9,9,0,0,1,9-9h0a9,9,0,0,1,9,9h0A9,9,0,0,1,24,33Zm5.92-2.08L34,35M21,24h6m-3-3v6",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}})])]),e._v(" "),t("i",{staticClass:"jz-image-viewer__actions__divider"}),e._v(" "),t("i",{staticClass:"ftse-0_px",attrs:{title:e.isContainMode?"适应比例":"实际比例"}},[t("svg",{directives:[{name:"show",rawName:"v-show",value:!e.isContainMode,expression:"!isContainMode"}],staticClass:"wh-50_px ht-50_px cr-pointer cr-white--hover bdcr-000CP5--hover oy-1--hover oy-0P8",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50"},on:{click:e.toggleMode}},[t("path",{attrs:{d:"M34.15,33H17.85A1.81,1.81,0,0,1,16,31.24h0V17.76A1.81,1.81,0,0,1,17.85,16h16.3A1.81,1.81,0,0,1,36,17.76V31.24A1.81,1.81,0,0,1,34.15,33Z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"2"}}),e._v(" "),t("circle",{attrs:{cx:"26",cy:"27",r:"1",fill:"currentColor"}}),e._v(" "),t("circle",{attrs:{cx:"26",cy:"23",r:"1",fill:"currentColor"}}),e._v(" "),t("polygon",{attrs:{points:"32 20 32 29 31 29 31 21.55 29 22 29 20.67 32 20",fill:"currentColor"}}),e._v(" "),t("polygon",{attrs:{points:"22 20 22 29 21 29 21 21.55 19 22 19 20.67 22 20",fill:"currentColor"}})]),e._v(" "),t("svg",{directives:[{name:"show",rawName:"v-show",value:e.isContainMode,expression:"isContainMode"}],staticClass:"wh-50_px ht-50_px cr-pointer cr-white--hover bdcr-000CP5--hover oy-1--hover oy-0P8",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50"},on:{click:e.toggleMode}},[t("path",{attrs:{d:"M15,20V16a1,1,0,0,1,1-1h4m14,5V16a1,1,0,0,0-1-1H29M15,29v4a1,1,0,0,0,1,1h4m9,0h4a1,1,0,0,0,1-1V29",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}}),e._v(" "),t("rect",{attrs:{x:"21",y:"21",width:"7",height:"7",rx:"1",fill:"currentColor"}})])]),e._v(" "),t("i",{staticClass:"jz-image-viewer__actions__divider"}),e._v(" "),e.refresh?t("i",{staticClass:"ftse-0_px",attrs:{title:"逆时针旋转"}},[t("svg",{staticClass:"jz-icon-refresh-left wh-50_px ht-50_px cr-pointer cr-white--hover bdcr-000CP5--hover oy-1--hover oy-0P8",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50"},on:{click:function(t){return e.handleActions("anticlocelise")}}},[t("g",{attrs:{id:"icon_retreat","data-name":"icon retreat"}},[t("path",{attrs:{d:"M16.05,21.79a6.79,6.79,0,0,1,.85-2A9.06,9.06,0,0,1,24.83,15h0A9.34,9.34,0,0,1,34,24.5h0A9.34,9.34,0,0,1,24.83,34h0a9.15,9.15,0,0,1-8.72-6.52M15,18v4.42h4.28",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}})])])]):e._e(),e._v(" "),e.refresh?t("i",{staticClass:"ftse-0_px",attrs:{title:"顺时针旋转"}},[t("svg",{staticClass:"jz-icon-refresh-right wh-50_px ht-50_px cr-pointer cr-white--hover bdcr-000CP5--hover oy-1--hover oy-0P8",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50"},on:{click:function(t){return e.handleActions("clocelise")}}},[t("g",{attrs:{id:"icon_retreat","data-name":"icon retreat"}},[t("path",{attrs:{d:"M32.89,27.48A9.15,9.15,0,0,1,24.17,34h0A9.34,9.34,0,0,1,15,24.5h0A9.34,9.34,0,0,1,24.17,15h0a9.06,9.06,0,0,1,7.93,4.75,6.79,6.79,0,0,1,.85,2m-3.23.67H34V18",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}})])])]):e._e(),e._v(" "),e._t("default",null,{slot:"actions"})],2)]):e._e(),e._v(" "),e.imgDataList.length>1&&!e.isMobile&&e.showCountContainer?t("div",{staticClass:"jz-image-viewer__count lt-50_pct bm-74_px ftse-13_px tm-translateXNE50_pct pgtp-10_px pgbm-10_px pgrt-10_px pglt-10_px pn-absolute cr-e0e0e0 zix-999"},[e._v("\n            "+e._s(e.index+1)+"/"+e._s(e.imgDataList.length)+"\n        ")]):e._e(),e._v(" "),t("div",{staticClass:"jz-image-viewer__canvas wh-100_pct ht-100_pct dy-flex jyct-center anis-center than-none",on:{click:e.hideViewer}},[t("div",{staticClass:"jz-image-viewer__container wh-100_pct ht-100_pct dy-flex pn-relative jyct-spaceEvenly anis-stretch","class":e.imageContainerClass},[e._l(e.imgDataList,(function(i,n){return[t("div",{key:i.src+n,ref:"animateView",refInFor:!0,staticClass:"jz-image-viewer__item wh-100_pct urst-none ht-100_pct jyct-center anis-center anflme-both antgfn-ease pn-absolute","class":e.animateViewClass(n),style:e.imgViewStyle,on:{touchstart:e.handleTouchstart}},[e.isMobile&&e.disableLongPress?t("div",{staticClass:"jz-image-viewer__image_mask zix-1 wh-100_pct ht-100_pct pn-absolute urst-none",on:{pointerdown:e.handlePointerdown,mousedown:e.handleMouseDown}}):e._e(),e._v(" "),e.loading||e.isMobile&&e.disableLongPress?e._e():t("img",{ref:"img",refInFor:!0,staticClass:"jz-image-viewer__img urst-none wh-auto ht-auto","class":e.imageClass,style:e.imgStyle,attrs:{alt:i.title||"","image-loaded":i.loaded,src:i.src},on:{load:e.handleImgLoad,pointerdown:e.handlePointerdown,mousedown:e.handleMouseDown}}),e._v(" "),!e.loading&&e.isMobile&&e.disableLongPress?t("img",{ref:"img",refInFor:!0,staticClass:"jz-image-viewer__img urst-none wh-auto ht-auto","class":e.imageClass,style:e.imgStyle,attrs:{"image-loaded":i.loaded,src:i.src,alt:i.title||""},on:{load:e.handleImgLoad}}):e._e(),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.loading&&e.isMobile,expression:"loading && isMobile"}],staticClass:"jz-image-viewer__loading wh-100_pct ht-100_pct pn-absolute urst-none",on:{pointerdown:e.handlePointerdown,mousedown:e.handleMouseDown}})])]}))],2)]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowScalePercent&&!e.isMobile,expression:"isShowScalePercent && !isMobile"}],staticClass:"jz-image-viewer__scalePercent cr-white ftse-14_px ftfy-microsoftYahei brrs-25_px brcr-808080CP5 leht-34_px ttan-center brse-solid brwh-1_px bdcr-000CP5 tp-50_pct lt-50_pct tm-translateNE50_pct wh-80_px ht-34_px pn-absolute"},[e._v("\n            "+e._s(e.scalePercent)+"\n        ")]),e._v(" "),e.isMobile&&e.hideDetailContent?t("div",{staticClass:"jz-image-viewer-mobi__des zix-1000 bxsg-border bdcr-lGradientNE180deg0T0P6 pn-absolute wh-100_pct pgtp-10_px pglt-10_px pgrt-10_px bm-0_px pgbm-10_px"},[t("p",{directives:[{name:"show",rawName:"v-show",value:e.currentImgViewer.title,expression:"currentImgViewer.title"}],staticClass:"cr-white ftse-15_px wese-preWrap leht-1 mnbm-5_px leht-1P7 ttan-left","class":e.disabledLongPressClass,domProps:{innerHTML:e._s(e.decodeHtml(e.currentImgViewer.title))}}),e._v(" "),t("p",{directives:[{name:"show",rawName:"v-show",value:e.currentImgViewer.description,expression:"currentImgViewer.description"}],ref:"description",staticClass:"cr-ccc mxht-40_px ftse-12_px wese-preWrap line-clamp2 bxot-vertical leht-20_px ttan-left","class":e.disabledLongPressClass,domProps:{innerHTML:e._s(e.decodeHtml(e.currentImgViewer.description))}}),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showViewAll,expression:"showViewAll"}],staticClass:"dy-inineBlock ft-right mntp-4_px filter_up_event ftse-12_px cr-ccc ttan-right zix-99999",on:{click:e.showDetailHandler}},[e._v("\n                "+e._s(e.viewAll)+"\n            ")])]):e._e(),e._v(" "),t("transition",{attrs:{name:"fade-in"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.hideDetailContent,expression:"!hideDetailContent"}],staticClass:"wh-100_pct ht-100_pct tp-0_px lt-0_px rt-0_px bm-0_px bdcr-000CP5 zix-999","class":e.contentDetailFixedClass,on:{click:e.hideDetailHandler}})]),e._v(" "),t("transition",{attrs:{name:"fade-in"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.hideDetailContent,expression:"!hideDetailContent"}],staticClass:"filter_up_event content_wrap wh-100_pct ht-100_pct tp-0_px zix-1000","class":e.contentDetailFixedClass},[t("div",{ref:"detailWrap",staticClass:"content_detail filter_up_event dy-flex fxdn-column anis-flexStart jyct-flexEnd wh-100_pct owx-hidden ht-95_pct tp-0_px zix-1000","class":e.detailWrapClass},[t("div",{ref:"detailContent",staticClass:"pgrt-15_px pglt-15_px pgtp-40_px bxsg-border pgbm-40_px wh-100_pct"},[t("p",{directives:[{name:"show",rawName:"v-show",value:e.currentImgViewer.title,expression:"currentImgViewer.title"}],staticClass:"cr-white ftse-15_px leht-1 mnbm-5_px wese-preWrap leht-1P7 ttan-left","class":e.disabledLongPressClass,domProps:{innerHTML:e._s(e.decodeHtml(e.currentImgViewer.title))}}),e._v(" "),t("p",{directives:[{name:"show",rawName:"v-show",value:e.currentImgViewer.description,expression:"currentImgViewer.description"}],staticClass:"cr-ccc leht-20_px ftse-12_px ttan-left wese-preWrap","class":e.disabledLongPressClass,domProps:{innerHTML:e._s(e.decodeHtml(e.currentImgViewer.description))}}),e._v(" "),t("div",{staticClass:"cr-ccc ttan-left","class":e.disabledLongPressClass,domProps:{innerHTML:e._s(e.decodeHtml(e.currentImgViewer.detailContent))}})])]),e._v(" "),t("span",{staticClass:"detail_handle dy-inineBlock ftse-12_px filter_up_event cr-dedede wh-auto rt-0_px bm-0_px bxsg-border ttan-right zix-99999 pglt-0P75_rem pgrt-0P75_rem pgtp-10_px pgbm-10_px","class":e.putAwayClass,on:{click:e.hideDetailHandler}},[e._v("\n                    "+e._s(e.putAway)+"\n                ")])])]),e._v(" "),t("canvas",{ref:"textCanvas"})],2)])};n._withStripped=!0;var s=i(2),o=i.n(s),a=i(7),r=i(0),l=r.browser.isFirefox,c=!!Object(r.isBrowserEnv)()&&"PointerEvent"in window,h="mousemove",d="mouseup",u=!!Object(r.isBrowserEnv)()&&"ontouchstart"in window.document.documentElement,p=u?"touchmove":h,m=u?"touchend touchcancel":d,f=c?"pointermove":p,g=c?"pointerup pointercancel":m,v={CONTAIN:{name:"contain",icon:"jz-icon-full-screen"},ORIGINAL:{name:"original",icon:"jz-icon-c-scale-to-original"}},_="oy-0P4",w="cr-noDrop",b="cr-pointer",x="cr-white--hover",y="bdcr-000CP5--hover",C="oy-1--hover",M="cr-grabbing",D="oy-0P65",P="bdcr-000CP5",T="bdcr-000CP4",O="jyct-spaceBetween",j="bdcr-lGradient180deg0P3T0",E="mnbm-5_px",I="dy-none",k="dy-flex",z="anne-moveToRight",S="anne-moveFromLeft",A="anne-moveToLeft",H="anne-moveFromRight",Y="wtthct-none",L="pn-fixed",V="pn-absolute",N="fxfw-wrap",B="fxwp-wrap",F="bdcr-whiteCP2",X="urst-none",R=l()?"DOMMouseScroll":"mousewheel",$="正常",U=r.browser.isSafari();function W(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Z(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?W(Object(i),!0).forEach((function(t){o()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):W(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var G={},q={name:"ImageViewer",props:{refresh:{type:Boolean,"default":!0},disableLongPress:{type:Boolean,"default":!1},disableContextMenu:{type:Boolean,"default":!1},isShowActions:{type:Boolean,"default":!0},urlList:{type:Array,"default":function(){return[]}},zIndex:{type:Number,"default":2e3},onSwitch:{type:Function,"default":function(){}},onClose:{type:Function,"default":function(){}},onLog:{type:Function,"default":function(){}},logEventConfig:{type:Object,"default":function(){return{}}},initialIndex:{type:Number,"default":0},appendToBody:{type:Boolean,"default":!0},maskClosable:{type:Boolean,"default":!0},maxScale:{type:Number,"default":10},minScale:{type:Number,"default":.2},isMobi:{type:Boolean,"default":!1},manageMode:{type:Boolean,"default":!1},appendToContainerId:{type:[String,HTMLElement,HTMLDivElement],"default":""},infinite:{type:Boolean,"default":!0},contentTerminal:{type:String,"default":""},documentEventEl:{validator:function(e){return["object"].includes(Object(r.type)(e))},"default":function(){return null}},useScale:{type:Boolean,"default":!1}},data:function(){var e,t,i,n,s,o=this,a=Object(r.isBrowserEnv)()&&this.appendToBody||!this.manageMode?window.innerWidth<=1024:this.isMobi;return{POINTER_EVENT_MAP:[],POINTER_MOVE_EVENT_MAP:[],index:this.initialIndex,isShow:!1,loading:!1,mode:v.CONTAIN,transform:{scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1,width:0,height:0,naturalWidth:0,naturalHeight:0},isMobile:a,mouseMoveing:!1,touchMoveing:!1,touchUped:!0,mouseUped:!0,disX:0,disY:0,maskOpacity:1,changeImgFlag:!1,imageEdited:!1,delayFlag:!1,timer:null,delay:3e3,startY:0,startX:0,viewportSize:{clientH:975,center:{x:0,y:0},top:{radio:.02},bottom:{radio:.02}},touchstartTimer:null,bodyTop:0,bodyLeft:0,isDoublePoint:!1,prevFlag:!1,nextFlag:!1,out:!1,"in":!1,outIdx:this.initialIndex,inIdx:this.initialIndex,isBodyPositionFixed:!1,isBodyOverflowHidden:!1,isShowScalePercent:!1,isScaleed:!1,showScalePercentDely:800,showScalePercentTimer:null,touchMoveOffset:!1,pointeruped:!0,showDetailContent:!1,detailWrapScrolling:!1,viewAll:null!==(e=null===r.context||void 0===r.context||null===(t=r.context.LS)||void 0===t?void 0:t.js_view_all)&&void 0!==e?e:"查看全部",putAway:null!==(i=null===r.context||void 0===r.context||null===(n=r.context.LS)||void 0===n?void 0:n.js_put_away)&&void 0!==i?i:"收起",showViewAll:!1,imgDataList:(s=Object(r.deepExtendClone)([],o.urlList),s.forEach((function(e,t){t===o.index||e.loaded?e.loaded=!0:(e.loaded=!1,e.src="")})),s)}},computed:{disabledLongPressClass:function(){var e={},t=X;return e[Y]=this.disableLongPress,e[t]=this.disableLongPress,e},putAwayClass:function(){return this.contentDetailFixedClass},closeClass:function(){var e={};return e[F]=this.showViewerTopMask,e[P]=!this.showViewerTopMask,e},detailWrapClass:function(){var e=[];return this.detailWrapScrolling&&e.push(N),!this.detailWrapScrolling&&e.push(B),this.disableLongPress&&e.push("disable_long_press"),e},contentDetailFixedClass:function(){var e=[];return this.isMobi&&this.manageMode?e.push(V):e.push(L),e},hideDetailContent:function(){return!this.showDetailContent},disableFirstARROW:function(){return!this.infinite&&!this.isFirst||this.infinite},disableLastARROW:function(){return!this.infinite&&!this.isLast||this.infinite},scalePercent:function(){return"".concat(parseInt(100*this.transform.scale),"%")},titleClass:function(){var e={};return e[E]=!!this.currentImgViewer.description,Object(r.deepExtendClone)(e,this.disabledLongPressClass)},imageClass:function(){var e={},t=Y;return e[M]=this.touchMoveing||this.mouseMoveing,e[t]=this.disableLongPress,e},cannotZoomIn:function(){return!this.isMobile&&this.transform.scale==this.maxScale},canZoomIn:function(){return this.transform.scale<this.maxScale},cannotZoomOut:function(){return!this.isMobile&&this.transform.scale==this.minScale},canZoomOut:function(){return this.transform.scale>this.minScale},showCountContainer:function(){return!this.delayFlag},actionsSvgInClass:function(){var e={},t=w,i=b,n=x,s=y,o=C;return e[_]=this.cannotZoomIn,e[t]=this.cannotZoomIn,e[i]=this.canZoomIn,e[n]=this.canZoomIn,e[s]=this.canZoomIn,e[o]=this.canZoomIn,e},actionsSvgOutClass:function(){var e={},t=w,i=b,n=x,s=y,o=C;return e[_]=this.cannotZoomOut,e[t]=this.cannotZoomOut,e[i]=this.canZoomOut,e[n]=this.canZoomOut,e[s]=this.canZoomOut,e[o]=this.canZoomOut,e},imageContainerClass:function(){return{}},maskStyle:function(){var e={};return this.isMobile&&(e.opacity=this.maskOpacity),e},maskClass:function(){var e={};return e[D]=!this.isMobile,e},viewerTopClass:function(){var e={},t=O,i=j;return e[T]=this.showViewerTopMask,e[t]=this.isMobile,e[i]=this.isMobile,e},showViewerTopMask:function(){return(this.currentImgViewer.title||this.currentImgViewer.description)&&!this.isMobile},isSingle:function(){return this.imgDataList.length<=1},isFirst:function(){return 0===this.index},isLast:function(){return this.index===this.imgDataList.length-1},currentImgViewer:function(){return this.imgDataList[this.index]},imgViewStyle:function(){var e=this.transform,t=e.scale,i=e.width,n=e.height,s=e.naturalWidth,o=e.naturalHeight,a={};return!this.useScale&&this.isScaleed&&this.isMobile&&(s>2500||o>2e3?(a.width="".concat(parseInt(i*t),"px"),a.height="".concat(parseInt(n*t),"px")):a.transform="scale(".concat(t,")")),a},imgStyle:function(){var e,t=this.transform,i=t.scale,n=t.deg,s=t.offsetX,o=t.offsetY,a=t.enableTransition,r={transform:"translate(".concat(s,"px, ").concat(o,"px) scale(").concat(!this.useScale&&this.isMobile?1:i,") rotate(").concat(n,"deg) "),transition:a?"transform .3s, margin .3s":""};return this.isContainMode&&(r.maxWidth=r.maxHeight="100%"),null!==(e=this.imgDataList)&&void 0!==e&&null!==(e=e[this.index])&&void 0!==e&&e.loaded||(r.opacity=0),r},isContainMode:function(){return"contain"===this.mode.name},isDoublePointEvent:function(){return this.POINTER_EVENT_MAP.length>=2},isAlowArrow:function(){var e=this.transform.offsetY,t=this.changeImgFlag&&0==e&&this.imgDataList.length>1;return t},eventUpCanPrev:function(){return this.disX>10&&this.isAlowArrow},eventUpCanNext:function(){return this.disX<-10&&this.isAlowArrow}},watch:{hideDetailContent:function(e){var t=this;e||this.$nextTick((function(){var e,i,n=(null==t||null===(e=t.$refs)||void 0===e||null===(e=e.detailWrap)||void 0===e?void 0:e.getBoundingClientRect()).height,s=(null==t||null===(i=t.$refs)||void 0===i||null===(i=i.detailContent)||void 0===i?void 0:i.getBoundingClientRect()).height;t.detailWrapScrolling=s>n}))},index:{handler:function(e){var t=this;this.reset(),this.resetDelay(),this.listenImgAnimate(),this.onSwitch(e),this.$emit("on-switch"),this.$nextTick((function(){var i;!(null===(i=t.imgDataList)||void 0===i||null===(i=i[e])||void 0===i?void 0:i.loaded)&&(t.loading=!0),t.loadImg(e).then((function(){t.setImageData()})),t.isTruncated(),t.loadImg(e+1),t.loadImg(e+2),t.resetMode()}))}},isMobile:function(e){var t=this;e?this.deviceSupportUninstall():this.deviceSupportInstall(),this.$nextTick((function(){t.loadImg(t.index).then((function(){t.setImageData()})),t.loadImg(t.index+1)}))},isScaleed:function(e){e&&(this.mode=v.CONTAIN)}},mounted:function(){var e=this;if(this.$nextTick((function(){window.requestAnimationFrame((function(){e.setBodyFixed(),!e.isMobile&&e.deviceSupportInstall(),e.resizeInstall(),e.resetDelay(),e._mouseUpHandler=function(t){e._mouseUp(t)},!c&&(e.handleTouchEnd=function(t){e._pointerup(t)}),c&&(e.handlePointerup=function(t){e._pointerup(t)}),e.isTruncated()}))})),this.loadImg().then((function(){e.setImageData()})),this.loadImg(this.index+1),this.loadImg(this.index+2),this.appendToBody)document.body.appendChild(this.$el);else{var t="string"===Object(r.type)(this.appendToContainerId)?document.getElementById(this.appendToContainerId):this.appendToContainerId;t&&t.appendChild(this.$el)}var i=this.logEventConfig,n=i.event,s=i.properties;n&&this.onLog&&this.onLog(this.logEventConfig.event,Z(Z({},s),{},{jz_free_text2:"组件加载(幻灯片初始化)",jz_free_text3:$,jz_free_bool1:this.manageMode,jz_domain:location.href||""})),"mobi"==this.contentTerminal&&this.manageMode||this.$refs["jz-image-viewer__wrapper"].focus()},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el),""!==this.appendToContainerId&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)},methods:{handleContextMenu:function(e){this.disableContextMenu&&e.preventDefault()},isTruncated:function(){try{var e,t,i;if(!this.isMobile)return;var n=this.$refs.textCanvas,s=null==n?void 0:n.getContext("2d"),o=this.currentImgViewer.description;if(!s||!o&&!this.currentImgViewer.detailContent)return this.showViewAll=!1,!1;var a="mobi"!==this.contentTerminal||this.manageMode?"12px ":"0.6rem ",r=.6*Number((null===(e=document.getElementsByTagName("html")[0])||void 0===e||null===(e=e.style)||void 0===e||null===(e=e.fontSize)||void 0===e||null===(e=e.split("px"))||void 0===e?void 0:e[0])||0)||12;s.font=a+'微软雅黑, "microsoft yahei", 宋体, 新宋体, sans-serif';var l=(null===(t=o)||void 0===t||null===(t=t.match(/\n+/g))||void 0===t?void 0:t.length)||0,c=r*o.length,h=(null===(i=this.$refs.description)||void 0===i?void 0:i.getBoundingClientRect()).width,d=2*h-10;1===l&&(d=h-10,c=r*(o=o.split("\n")[1]).length),this.showViewAll=c>d||l>=2||this.currentImgViewer.detailContent}catch(u){console.log(u),this.showViewAll=!0}},hideDetailHandler:function(){this.showDetailContent=!1},showDetailHandler:function(){this.showDetailContent=!0},setImageData:function(){var e=this;this.useScale||function(e,t,i){var n,s=document.createElement("img");if(e.naturalWidth&&!U)return i(e.naturalWidth,e.naturalHeight),s;var o=document.body||document.documentElement;s.onload=function(){i(s.width,s.height),U||o.removeChild(s)},null===(n=t.inheritedAttributes)||void 0===n||n.forEach((function(t){var i=e.getAttribute(t);null!==i&&s.setAttribute(t,i)})),s.src=e.src,U||(s.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",o.appendChild(s))}(this.$refs.img[this.index],{},(function(t,i){e.transform.naturalWidth=t,e.transform.naturalHeight=i,e.$nextTick((function(){requestAnimationFrame((function(){e.transform.height=e.$refs.img[e.index].height,e.transform.width=e.$refs.img[e.index].width}))}))}))},getDocumentEl:function(){return this.documentEventEl||document},decodeHtml:function(e){return e&&e.replace?e.replace(/&nbsp;/gi," ").replace(/&lt;/gi,"<").replace(/&gt;/g,">").replace(/&#92;/gi,"\\").replace(/&#39;/gi,"'").replace(/&quot;/gi,'"').replace(/\<br\/\>/gi,"\n").replace(/&amp;/gi,"&"):e},listenImgAnimate:function(){var e=this,t=this.$refs.animateView[this.outIdx],i=this.$refs.animateView[this.inIdx];Object(a.c)({el:i,startCallBack:function(){},endCallBack:function(){e["in"]=!1,e.startAnimateDirection()}}),Object(a.c)({el:t,startCallBack:function(){},endCallBack:function(){e.out=!1}});var n=this.isMobile?300:700;setTimeout((function(){e["in"]&&(e["in"]=!1,e.startAnimateDirection()),e.out&&(e.out=!1)}),n)},animateViewClass:function(e){var t={},i=I,n=z,s=S,o=A,a=H,r=k;return t["andn-0P3_s"]=this.isMobile,t["andn-0P7_s"]=!this.isMobile,t[i]=this.index!==e&&!(this.out&&this.outIdx==e),t[r]=this.out&&this.outIdx==e||this.inIdx==e,t[n]=this.prevFlag&&this.out&&this.outIdx==e,t[s]=this.prevFlag&&this["in"]&&this.inIdx==e,t[o]=this.nextFlag&&this.out&&this.outIdx==e,t[a]=this.nextFlag&&this["in"]&&this.inIdx==e,t["wh-100_pct"]=!this.isMobile,t["ht-100_pct"]=!this.isMobile,t},startAnimate:function(){this.out=!0,this["in"]=!0},startAnimateDirection:function(){this.nextFlag=!1,this.prevFlag=!1},loadImg:function(){var e=this,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.index;return new Promise((function(i){var n,s,o=e.$refs.img[t],r=null===(n=e.imgDataList)||void 0===n||null===(n=n[t])||void 0===n?void 0:n.loaded;if(o&&!r){var l=new Image;G["loadComplate".concat(t)]=function(){e.imgDataList[t].loaded=!0,e.imgDataList[t].src=e.urlList[t].src,t==e.index&&(e.loading=!1),i(t),setTimeout((function(){Object(a.e)(l,"load",G["loadComplate".concat(t)])}),50)},G["loadError".concat(t)]=function(i){e.handleImgError(i),setTimeout((function(){Object(a.e)(l,"error",G["loadError".concat(t)])}),50)},Object(a.f)(l,"load",G["loadComplate".concat(t)]),Object(a.f)(l,"error",G["loadError".concat(t)]),l.src=null===(s=e.urlList)||void 0===s||null===(s=s[t])||void 0===s?void 0:s.src}}))},setBodyFixed:function(){this.bodyTop=Object(a.b)(),this.isMobile&&this.manageMode&&"mobi"!==this.contentTerminal||(document.getElementsByTagName("html")[0].style.overflowY="hidden",this.isBodyOverflowHidden=!0),this.isMobile&&!this.manageMode&&(document.body.style.position="fixed",document.body.style.top=0,document.body.style.left=0,document.body.style.right=0,document.body.style.bottom=0,this.isBodyPositionFixed=!0,this.setTouchPenetrate())},setBodyStatic:function(){var e=this;this.isBodyOverflowHidden&&(document.getElementsByTagName("html")[0].style.overflowY="",this.isBodyOverflowHidden=!1),this.isBodyPositionFixed&&(document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.bottom="",this.isBodyPositionFixed=!1,setTimeout((function(){e.resetTouchPenetrate()}),350)),Object(a.g)(0,this.bodyTop)},setTouchPenetrate:function(){Object(r.digGet)(document.getElementById("g_web"),"style")&&(document.getElementById("g_web").style["pointer-events"]="none"),Object(r.digGet)(document.getElementById("jzWebContainer"),"style")&&(document.getElementById("jzWebContainer").style["pointer-events"]="none"),Object(r.digGet)(document.getElementById("web"),"style")&&(document.getElementById("web").style["pointer-events"]="none")},resetTouchPenetrate:function(){Object(r.digGet)(document.getElementById("g_web"),"style")&&(document.getElementById("g_web").style["pointer-events"]=""),Object(r.digGet)(document.getElementById("jzWebContainer"),"style")&&(document.getElementById("jzWebContainer").style["pointer-events"]=""),Object(r.digGet)(document.getElementById("web"),"style")&&(document.getElementById("web").style["pointer-events"]="")},resetMaskOpacity:function(){this.maskOpacity>=.5?(this.handleActions("offsetY",{offsetY:0,enableTransition:!0}),this.maskOpacity=1):this.hide()},setMaskOpacity:function(e){var t=e.preDragDisY,i=e.dragDisY,n=e.absDisY,s=e.absDisX;!this.changeImgFlag&&t!==i&&n-s>0&&(this.maskOpacity=this.getMaskOpacityRadio(i))},setViewportSize:function(e,t){var i=this.$el.clientHeight,n=parseInt(t),s=parseInt(e);this.viewportSize.clientH=i,this.viewportSize.center.x=s,this.viewportSize.center.y=n,this.viewportSize.top.radio=1/n,this.viewportSize.bottom.radio=1/(i-n)},getMaskOpacityRadio:function(e){var t=e-this.viewportSize.center.y<0,i=t?"top":"bottom",n=t?e:this.viewportSize.clientH-e;return parseInt(n)*this.viewportSize[i].radio},resetDelay:function(){var e=this;clearTimeout(this.timer),this.delayFlag=!1,this.timer=setTimeout((function(){e.delayFlag=!0}),this.delay)},hide:function(){this.setBodyStatic(),this.resizeUninstall(),this.deviceSupportUninstall(),this.onClose(),this.$emit("on-close"),this.logEvent("关闭",$)},hideViewer:function(e){"IMG"===e.target.tagName&&e.target.className.includes("jz-image-viewer__img")||this.hide()},resizeInstall:function(){var e=this;this.handleResize=Object(r.rafThrottle)((function(){e._resize()})),Object(a.f)(window,"resize",this.handleResize)},resizeUninstall:function(){Object(a.e)(window,"resize",this.handleResize),this.handleResize=null},setTouchMoving:function(){!this.touchMoveing&&(this.touchMoveing=!0),!this.mouseMoveing&&(this.mouseMoveing=!0)},get2PointDistance:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];if(e.touches&&e.touches.length){var i=e.touches[0],n=e.touches[1],s=i.pageY,o=i.pageX,a=n.pageY,r=n.pageX,l=Math.abs(o-r),c=Math.abs(s-a);return{disLine:Math.sqrt(Math.pow(l,2)+Math.pow(c,2))}}if(t.length){var h=t[0],d=t[1],u=h.pageY,p=h.pageX,m=d.pageY,f=d.pageX,g=Math.abs(p-f),v=Math.abs(u-m);return{disLine:Math.sqrt(Math.pow(g,2)+Math.pow(v,2))}}return{disLine:0}},deviceSupportInstall:function(){var e=this;this._keyDownHandler=Object(r.rafThrottle)((function(t){e._keyDown(t)})),this._mouseWheelHandler=Object(r.rafThrottle)((function(t){e._mouseWheel(t)})),Object(a.f)(this.getDocumentEl(),"keydown",this._keyDownHandler),Object(a.f)(this.$el,R,this._mouseWheelHandler)},deviceSupportUninstall:function(){this._keyDownHandler&&Object(a.e)(this.getDocumentEl(),"keydown",this._keyDownHandler),this._mouseWheelHandler&&Object(a.e)(this.$el,R,this._mouseWheelHandler),this._removeMouseUpHandler(),this._removeHandleTouchend(),this._removeHandlePointerup(),Object(a.e)(this.$el,m,this.handleDoubleTouchEnd),this.resetUpedData(),this._keyDownHandler=null,this._mouseWheelHandler=null},_keyDown:function(e){switch(e.keyCode){case 27:this.hide();break;case 32:this.toggleMode();break;case 37:this.prev();break;case 38:this.handleActions("zoomIn");break;case 39:this.next();break;case 40:this.handleActions("zoomOut")}},_mouseWheel:function(e){(e.wheelDelta?e.wheelDelta:-e.detail)>0?this.handleActions("zoomIn",{zoomRate:.1,enableTransition:!1}):this.handleActions("zoomOut",{zoomRate:.1,enableTransition:!1})},_mouseUp:function(e){Object(a.e)(this.$el,h,this._dragHandler),0===e.button&&(this.isMobile&&(this._eventUpChangeHandle(),this._eventUpReset()),this.resetTouchMoveing())},_resize:function(){this.isMobile=window.innerWidth<=1024,this.reset(),this.resetTouchMoveing(),this._clearPointerMap(),this.isMobile||(this._removeHandlePointerup(),this.pointeruped=!0)},_pointerMoveTransform:function(e){var t=e.preDragDisY,i=e.dragDisY,n=e.absDisY,s=e.absDisX;if(!this.isDoublePointEvent&&!this.isDoublePoint){var o=this.disX,a=this.disY;this.touchMoveOffset?this.handleActions(["offsetX","offsetY"],{offsetX:o,offsetY:a,enableTransition:!1}):(this.handleActions("offsetY",{offsetY:a,enableTransition:!1}),this.setMaskOpacity({preDragDisY:t,dragDisY:i,absDisY:n,absDisX:s}))}},_imgTargetEventDefault:function(e){var t=e.target,i=Object(r.digGet)(t,"className",""),n=Object(r.isFunction)(i.includes),s="IMG"===t.tagName&&n&&i.includes("jz-image-viewer__img")||n&&i.includes("jz-image-viewer__item")||n&&i.includes("jz-image-viewer__image_mask");return s&&e.preventDefault(),s},_mouseMove:function(e,t){var i=t.startY,n=t.offsetY,s=t.startX,o=t.offsetX;!this.mouseMoveing&&(this.mouseMoveing=!0),this.handleActions(["offsetX","offsetY"],{offsetX:o+e.pageX-s,offsetY:n+e.pageY-i,enableTransition:!1})},_clearPointerMap:function(){var e=this;setTimeout((function(){e.POINTER_EVENT_MAP=[],e.POINTER_MOVE_EVENT_MAP=[]}),80)},_pointerup:function(e){var t,i,n,s;if(this.isMobile){if((new Date).getTime()-this.longPressStartTime>300)return this._eventUpChangeHandle(),this._eventUpReset(),void this.resetTouchMoveing();this.longPressStartTime=undefined}var o=e.changedTouches,r=e.target,l=e.path;if(l=l||e.composedPath&&e.composedPath(),this.presNone=!1,o?Object(a.e)(this.$el,p,this.handleTouchMove):this._removeHandlePointermove(),!(null!=r&&null!==(t=r.className)&&void 0!==t&&null!==(i=t.includes)&&void 0!==i&&i.call(t,"filter_up_event")||null!==(n=l)&&void 0!==n&&null!==(s=n.filter)&&void 0!==s&&s.call(n,(function(e){var t,i;return null==e||null===(t=e.className)||void 0===t||null===(i=t.includes)||void 0===i?void 0:i.call(t,"filter_up_event")})).length)||!this.isMobile){if(!(this.touchMoveing||this.isDoublePoint&&this.isDoublePointEvent))return this.hide(),this._eventUpReset(),void this.resetTouchMoveing();this._eventUpChangeHandle(),this._eventUpReset(),this.resetTouchMoveing()}},_pointermove:function(e,t){var i=e.pointerType,n=e.pageX,s=e.pageY,o=e.changedTouches;o&&(n=o[0].pageX,s=o[0].pageY,!i&&(i="touch"));var a=t.startY,r=t.offsetY,l=t.startX,c=t.offsetX,h=t.preDragDisY,d=t.dragDisY,u=t.mouseTime;h=t.preDragDisY=Math.abs(d),d=t.dragDisY=s-a,this.disX=c+n-l,this.disY=r+s-a,0===this.disX&&0===this.disY||this.setTouchMoving();var p=this.disX,m=this.disY,f=(new Date).getTime(),g=Math.abs(m),v=Math.abs(p),_=this.transform.scale;switch(i){case"touch":case"mouse":if(_>1&&!this.touchMoveOffset)return this.touchMoveOffset=!0,void(this.changeImgFlag=!1);if((v-g>=0&&f-u<=100||this.changeImgFlag)&&!this.touchMoveOffset)return this.changeImgFlag=!0,void this.resetOffsetY();!this.changeImgFlag&&this._pointerMoveTransform({preDragDisY:h,dragDisY:Math.abs(s),absDisY:g,absDisX:v})}this._imgTargetEventDefault(e)},_resetDoublePoint:function(){this.isDoublePoint=!1,this.resetChangeImgFlag(),this.resetUpedData(),Object(a.e)(this.$el,m,this.handleDoubleTouchEnd),Object(a.e)(this.$el,p,this.handleTouchMove),this._removeHandleTouchend()},_removeMouseUpHandler:function(){this.documentEventEl&&Object(a.e)(this.documentEventEl,d,this._mouseUpHandler),Object(a.e)(document,d,this._mouseUpHandler)},_addMouseUpHandler:function(){this.documentEventEl&&Object(a.f)(this.documentEventEl,d,this._mouseUpHandler),Object(a.f)(document,d,this._mouseUpHandler)},_removeHandleTouchend:function(){this.documentEventEl&&Object(a.e)(this.documentEventEl,m,this.handleTouchEnd),Object(a.e)(document,m,this.handleTouchEnd)},_addHandleTouchend:function(){this.documentEventEl&&Object(a.f)(this.documentEventEl,m,this.handleTouchEnd),Object(a.f)(document,m,this.handleTouchEnd)},_removeHandlePointerup:function(){this.documentEventEl&&Object(a.e)(this.documentEventEl,g,this.handlePointerup),Object(a.e)(document,g,this.handlePointerup)},_addHandlePointerup:function(){this.documentEventEl&&Object(a.f)(this.documentEventEl,g,this.handlePointerup),Object(a.f)(document,g,this.handlePointerup)},_removeHandlePointermove:function(){this.documentEventEl&&Object(a.e)(this.documentEventEl,f,this.handlePointermove),Object(a.e)(document,f,this.handlePointermove)},_addHandlePointermove:function(){this.documentEventEl&&Object(a.f)(this.documentEventEl,f,this.handlePointermove),Object(a.f)(document,f,this.handlePointermove)},_eventUpChangeHandle:function(){this.eventUpCanNext?this.next():this.eventUpCanPrev&&this.prev()},_eventUpReset:function(){this._clearPointerMap(),!this.touchMoveOffset&&this.resetMaskOpacity()},handlePointerdown:function(e){var t=this;if(c){if(this.isMobile&&this.$set(this.POINTER_EVENT_MAP,this.POINTER_EVENT_MAP.length,e),!this.isMobile||this.isDoublePointEvent||this.isDoublePoint)return this.isDoublePointEvent?(this._removeHandlePointerup(),void(this.pointeruped=!0)):void 0;var i=this.transform,n=i.offsetX,s=i.offsetY,o=i.scale,a=e.pageX,r=e.pageY;this.setViewportSize(a,r);var l={startY:r,offsetY:s,startX:a,offsetX:n,scale:o,preDragDisY:0,dragDisY:0,mouseTime:(new Date).getTime()};this.resetMouseDownData(),this.handlePointermove=function(e){t._pointermove(e,l)},this._removeHandlePointermove(),this._addHandlePointermove(),this.pointeruped&&this.handlePointerup&&this._addHandlePointerup(),this.pointeruped=!1,e.preventDefault()}},handleTouchstart:function(e){var t=this;if(this.isMobile&&(this.longPressStartTime=(new Date).getTime()),this.loading||2===e.touches.length||c){if(clearTimeout(this.touchstartTimer),2===e.touches.length){this.isDoublePoint=!0,this.resetMouseDownData();var i=this.get2PointDistance(e).disLine;this.handleTouchMove=function(e){t.setTouchMoving();var n=t.get2PointDistance(e).disLine;i<n?t.handleActions("zoomIn",{zoomRate:.05,enableTransition:!1}):t.handleActions("zoomOut",{zoomRate:.05,enableTransition:!1})},this.handleDoubleTouchEnd=function(){Object(a.e)(t.$el,p,t.handleTouchMove),t._removeHandlePointermove();var e=t.transform.scale;e<=.5?t.hide():e>.5&&e<1&&(t.reset(),t.resetOffset()),t.resetTouchMoveing(),t._clearPointerMap(),t._resetDoublePoint()},Object(a.e)(this.$el,p,this.handleTouchMove),Object(a.f)(this.$el,p,this.handleTouchMove),Object(a.e)(this.$el,m,this.handleDoubleTouchEnd),this._removeHandlePointerup(),this._removeHandleTouchend(),this.resetUpedData(),this.handleDoubleTouchEnd&&Object(a.f)(this.$el,m,this.handleDoubleTouchEnd),e.preventDefault()}}else this.touchstartTimer=setTimeout((function(){t.isDoublePoint&&t._resetDoublePoint();var i=t.transform,n=i.offsetX,s=i.offsetY,o=e.touches[0],r=o.pageY,l=o.pageX;t.setViewportSize(l,r),t.resetMouseDownData();var c={preDragDisY:0,dragDisY:0,startY:r,offsetY:s,startX:l,offsetX:n,mouseTime:(new Date).getTime()};t.handleTouchMove=function(e){t._pointermove(e,c)},Object(a.e)(t.$el,p,t.handleTouchMove),Object(a.f)(t.$el,p,t.handleTouchMove),t.touchUped&&t.handleTouchEnd&&t._addHandleTouchend(),t.touchUped=!1,e.preventDefault()}),50)},handleImgLoad:function(){this.loading=!1},handleImgError:function(e){e.target.alt="加载失败",this.logEvent("图片加载失败","网速")},handleMouseDown:function(e){var t=this;if(!(this.isMobile&&c||(Object(a.e)(this.$el,h,this._dragHandler),0!==e.button))){var i=this.transform,n=i.offsetX,s=i.offsetY,o=e.pageX,r=e.pageY;this.setViewportSize(o,r);var l={preDragDisY:0,dragDisY:0,startY:r,offsetY:s,preDisX:0,startX:o,offsetX:n,mouseTime:(new Date).getTime()};this.resetMouseDownData(),this.isMobile?this._dragHandler=function(e){t._pointermove(e,l)}:this._dragHandler=function(e){t._mouseMove(e,l)},Object(a.f)(this.$el,h,this._dragHandler),this._mouseUpHandler&&this.mouseUped&&this._addMouseUpHandler(),this.mouseUped=!1,e.preventDefault()}},handleMouseUp:function(){this.mouseMoveing||this.isMobile||(this.mouseMoveing=!1,this.toggleMode())},handleMaskClick:function(){this.maskClosable&&this.hide()},resetTouchMoveing:function(){this.touchMoveing=!1,this.touchMoveOffset=!1,this.mouseMoveing&&(this.mouseMoveing=!1)},resetChangeImgFlag:function(){this.changeImgFlag=!1},resetUpedData:function(){this.mouseUped=!0,this.touchUped=!0,this.pointeruped=!0},resetMouseDownData:function(){this.disX=0,this.disY=0,this.maskOpacity=1,this.resetChangeImgFlag()},resetOffset:function(){this.resetOffsetY(),this.resetOffsetX()},resetOffsetY:function(){this.transform.offsetY=0},resetOffsetX:function(){this.transform.offsetX=0},resetScale:function(){this.transform.scale=1},resetDeg:function(){this.transform.deg=0},resetEnableTransition:function(){this.transform.enableTransition=!1},reset:function(){this.resetEnableTransition(),this.resetDeg(),this.resetScale(),this.resetOffset(),this.isScaleed=!1},resetMode:function(){this.mode!==v.CONTAIN&&(this.mode=v.CONTAIN,this.reset())},logEvent:function(e,t){var i=this.logEventConfig,n=i.event,s=i.properties,o=void 0===s?{}:s;n&&this.onLog&&this.onLog(this.logEventConfig.event,Z({jz_free_text2:e,jz_free_text3:t,jz_free_bool1:this.manageMode,jz_domain:location.href||""},o))},toggleMode:function(){if(!this.loading){var e=Object.keys(v),t=(Object.values(v).indexOf(this.mode)+1)%e.length;this.mode=v[e[t]],this.reset(),this.setImageData(),this.isContainMode?(this.isScaleed=!1,this.logEvent("适应图按钮",$)):this.logEvent("原图按钮",$)}},prev:function(){if(!(this.isFirst&&!this.infinite||this.prevFlag)){this.prevFlag=!0,this.startAnimate();var e=this.imgDataList.length;this.outIdx=this.index,this.index=(this.index-1+e)%e,this.inIdx=this.index,this.logEvent("上一页",$)}},next:function(){if(!(this.isLast&&!this.infinite||this.nextFlag)){this.nextFlag=!0,this.startAnimate();var e=this.imgDataList.length;this.outIdx=this.index,this.index=(this.index+1)%e,this.inIdx=this.index,this.logEvent("下一页",$)}},scalePercentHandle:function(){var e=this;clearTimeout(this.showScalePercentTimer),this.isScaleed=!0,this.isShowScalePercent=!0,this.showScalePercentTimer=setTimeout((function(){e.isShowScalePercent=!1}),this.showScalePercentDely)},handleActions:function(e){var t=this,i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(!this.loading)if(Object(r.isArray)(e))e.forEach((function(e){t.handleActions(e,i)}));else{var n=Object(r.deepExtendClone)({zoomRate:.2,rotateDeg:90,enableTransition:!0},i),s=n.zoomRate,o=n.rotateDeg,a=n.enableTransition,l=n.offsetY,c=n.offsetX,h=this.transform,d=h.scale;switch(e){case"zoomOut":d=parseFloat((h.scale-s).toFixed(3)),h.scale=d>this.minScale?d:.2,this.scalePercentHandle(),this.logEvent("缩小",$);break;case"zoomIn":d=parseFloat((h.scale+s).toFixed(3)),h.scale=d<this.maxScale?d:this.maxScale,this.scalePercentHandle(),this.logEvent("放大",$);break;case"clocelise":h.deg+=o,this.logEvent("顺时针旋转",$);break;case"anticlocelise":h.deg-=o,this.logEvent("逆时针旋转",$);break;case"offsetY":h.offsetY=l;break;case"offsetX":h.offsetX=c}h.enableTransition=a}}}},J=q,K=i(6),Q=Object(K.a)(J,n,[],!1,null,"4f7c66ef",null);t["default"]=Q.exports}}]);